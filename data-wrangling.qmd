---
title: 'Data Wrangling'
author: 'Briana Barajas'
date: 2024-01-23
---

## Preparation

Set-up

```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

Load packages

```{r, results='hide', warning = FALSE, message=FALSE}
# wrangling
library(tidyverse)
library(here)
library(janitor)

# raster/geospatial
library(sf)
library(ggspatial)
library(terra)

# modelling
library(dismo)
```

## Mapping Raw Data

### Species point data

```{r}
# read data
spp_point <- st_read(here('data/CampRoberts_spatial_data/Species_pts/CR_BASP_obs_11Jul22.shp')) %>% 
  clean_names()

# update CRS (using EPSG:4269)
occurence <- st_transform(spp_point, "EPSG:4296")

# map data
ggplot(data = occurence) +
  geom_sf()
```

### Environment data

```{r, warning=FALSE}
# read in data files
slope <- rast(x = 'data/CampRoberts_spatial_data/crob_slope')
elev <- rast('data/CampRoberts_spatial_data/crob_elev')
aspect <- rast('data/CampRoberts_spatial_data/crob_aspect')

# update CRS (using EPSG:4269)
crs(slope) <- "EPSG:4296"
crs(elev) <- "EPSG:4296"
crs(aspect) <- "EPSG:4296"

# plot data
plot(slope, main = 'Slope Raster')
plot(elev, main = 'Elevation Raster')
plot(aspect, main = 'Aspect Raster')
```

### Canopy rasters

Unlike the environmental data, canopy information is specific to the plots.

```{r}
# create a list of canopy file path
canopy_files <- list.files(here('data', 'CampRoberts_spatial_data', 'Canopy_raster'), pattern = 'can*', full.names = TRUE)

# for-loop reads in canopy rasters & save them to the Global environment
for (i in seq_along(canopy_files)) {
  
  # read in canopy raster
  can_rast <- rast(canopy_files[i])
  
  # update the CRS
  crs(can_rast) <- 'EPSG:4296'
  
  # save the updated raster
  assign(paste0("can_rast_p", i), can_rast, envir = .GlobalEnv)
}
```

### Plot outlines

```{r}
# read in files

```
